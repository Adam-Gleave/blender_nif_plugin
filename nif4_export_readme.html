<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>The Blender NIF Exporter - README</title>
  </head>
  <body>
    <h1>
      The Blender NIF exporter
    </h1>

    <p>
      nif4_export.py v0.7 by Amorilia ( amorilia@gamebox.net )
    </p>
    <h2>
      BSD License
    </h2>
    <p>
      Copyright (c) 2005, NIF File Format Library and Tools<br />
      All rights reserved.
    </p>

    <p>
      Redistribution and use in source and binary forms, with or
      without modification, are permitted provided that the
      following conditions are met:
    </p>
    <ul>
      <li>Redistributions of source code must retain the above
      copyright notice, this list of conditions and the following
      disclaimer.
      </li>
      <li>Redistributions in binary form must reproduce the above
      copyright notice, this list of conditions and the following
      disclaimer in the documentation and/or other materials
      provided with the distribution.
      </li>
      <li>Neither the name of the NIF File Format Library and Tools
      project nor the names of its contributors may be used to
      endorse or promote products derived from this software
      without specific prior written permission.
      </li>

    </ul>
    <p>
      THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND
      CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES,
      INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
      MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
      DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
      CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
      SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
      NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
      LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
      HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
      CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR
      OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
      SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
    </p>
    <h2>
      Thanks to...
    </h2>
    <ul>
      <li>Brandano, for the import script, which helped a lot
      writing this export script
      </li>

      <li>Taharez, for helping with the Python NIF library, and NIF
      specs
      </li>
      <li>Brick, for NIF specs
      </li>
      <li>Shon, for NIF specs, and explaining things about rigging
      and programming
      </li>
      <li>y67_a, for pointing out the fact that the script forgot
      to export normals; and thereby opening the path to smoothing
      support
      </li>
      <li>Moritz, for non-textured object support, optimizing the
      main loop in the trishapedata export, and animation group
      support
      </li>

    </ul>
    <h2>
      Installation
    </h2>
    <ul>
      <li>(optional) If you wish to use Morrowind's textures:
      </li>
      <li class="c1">
        <ul>
          <li>extract the contents of 'Morrowind.bsa' (and, if you
          have the expansions, also 'Tribunal.bsa' and
          'Bloodmoon.bsa') into 'C:\MORROWIND'
          </li>

          <li>convert all .dds files in 'C:\\MORROWIND\\textures'
          to .tga files (for instance, using 'DDS Converter
          2.1')<br />
          </li>
        </ul>
      </li>
      <li>Copy the export script "nif4_export.py" along with the
      "nif.py" file into the Blender scripts folder.
      </li>
    </ul>
    <h2>
      Usage
    </h2>

    <ul>
      <li>create meshes (and empties, if you like) in blender:
        <ul>
          <li>when grouping, always make parent without inverse (in
          Object Mode, use CTRL-SHIFT-P)
          </li>
        </ul>
      </li>
      <li>create UV coordinates (be sure to check the blender
      manual for more details)
        <ul>
          <li>create seams (3D View, Edit Mode, select seam
          vertices, CTRL-E)
          </li>

          <li>in the 3D View, UV Face Select Mode, select all
          faces, press U-&gt;LSCM
          </li>
          <li>(optional) if you want to creat your own texture: in
          the UV/Image Editor, UVs-&gt;Save UV Face Layout, and
          process the saved texture with your favorite 2D paint
          program
          </li>
        </ul>
      </li>
      <li>add materials to your meshes, and add one texture to each
      material, with the following settings:
        <ul>
          <li>texture map input: UV
          </li>

          <li>texture map output: COL for diffuse map (base
          texture)
          </li>
        </ul>
      </li>
      <li>for each texture:
        <ul>
          <li>set texture type to 'Image'
          </li>
          <li>either load a texture from 'C:\MORROWIND\textures',
          or put your custom texture in the 'C:\Program
          Files\Morrowind\\Data Files\Textures' folder, and load it
          from there. Note that Blender does not read .dds files.
          </li>
        </ul>

      </li>
      <li>(optional) animate meshes and/or empty objects (press I
      to insert key, and select Rot, Loc, or LocRot; for now, only
      location and rotation channels are exported)
      </li>
      <li>(optional) Hull your model in a simple so-called
      collision mesh, which defines where the player cannot walk
      through (most of Morrowind's static models have a collision
      mesh, you can see them in the TES CS pressing F4 in the
      render window). You may want to create it to speed up
      collision detection, to help the player walk over objects
      such as stairs, or to allow the player to walk through
      certain parts of your model such as spider webs.* create a
      mesh called 'RootCollisionNode' (object name, not datablock
      name)* don't apply any material to it
      </li>
      <li>(optional) if you suspect that some of the faces of your
      meshes are not convex, then you should let blender
      triangulate these meshes (press CTRL-T in edit mode with all
      vertices selected), because in that case, Blender's
      triangulation algorithm is less error prone than the
      triangulation algorithm used in this script.
      </li>
      <li>select the models that you wish to export, and run this
      script from the 'File-&gt;Export' menu. Note that the script
      looks for unparented parents of the selected objects, and
      exports these root objects along with all of their children,
      so you don't have to select the whole model.
      </li>
    </ul>

    <h2>
      Notes
    </h2>
    <ul>
      <li>Non-uniformly scaled objects cannot be exported.
      Workaround: apply size and rotation. Unfortunately, this
      workaround does not work on empties.
      </li>
      <li>Animation may not be exported correctly due to a blender
      bug (at least in v237): parenting does not correctly update
      the local transform matrix. Workaround: parent without parent
      inverse (CTRL-SHIFT-P), and only then apply
      rotation/translation/scale for animation (for non-animated
      objects, a workaround is implemented in the exporter).<br />
        </li>
    </ul>

    <h2>
      History
    </h2>
    <ul>
      <li>0.0 (Jun 15): first try
      </li>
      <li>0.1 (Jun 20): fixed texture mapping, fixed
      transformations, improved error handling
      </li>
      <li>0.2 (Jun 30): export animation, transparency, multiple
      materials per mesh
      </li>
      <li>0.3 (Aug 25): export normals (fixes lighting, thx y67_a),
      niflib.py updated
      </li>

      <li>0.4 (Aug 28): support smoothing
      </li>
      <li>0.5 (Sep 26): support for non-textured objects,
      optimization in trishapedata
      </li>
      <li>0.6 (Sep 27): support for uniformly scaled objects (fixes
      compatibility problem with Brandano's import script), fixed
      emissive and ambient colour
      </li>
      <li>0.7 (Sep 30): animation group support (contributed by
      Moritz Deutsch)
      </li>
      <li>0.7.1 (Oct 7): vertex color support (contributed by
      Moritz Deutsch)
      </li>
    </ul>

  </body>
</html>
